{"ast":null,"code":"import _slicedToArray from\"G:\\\\skola\\\\webtech\\\\mysite\\\\my-react-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _classCallCheck from\"G:\\\\skola\\\\webtech\\\\mysite\\\\my-react-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";import _createClass from\"G:\\\\skola\\\\webtech\\\\mysite\\\\my-react-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";import _assertThisInitialized from\"G:\\\\skola\\\\webtech\\\\mysite\\\\my-react-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\assertThisInitialized.js\";import _inherits from\"G:\\\\skola\\\\webtech\\\\mysite\\\\my-react-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\inherits.js\";import _createSuper from\"G:\\\\skola\\\\webtech\\\\mysite\\\\my-react-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createSuper.js\";import React from'react';import{useState}from'react';import'./App.css';import{ItemViewer}from'./ItemViewer';import{Home}from'./Home';import{Search}from'./Search';import{Account}from'./Account';import{TopBar}from'./TopBar';import{Cart}from'./Cart';import Cookies from'js-cookie';import{BrowserRouter,Routes,Route,Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={cart:[],n_items:0};_this.count=0;_this.addToCart=_this.addToCart.bind(_assertThisInitialized(_this));_this.getCookie=_this.getCookie.bind(_assertThisInitialized(_this));_this.hasCookie=_this.hasCookie.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"hasCookie\",value:function hasCookie(cookieName){var cookies=[];document.cookie.split(';').forEach(function(el){var _el$split=el.split('='),_el$split2=_slicedToArray(_el$split,2),key=_el$split2[0],value=_el$split2[1];cookies.push(key);});return cookies.includes(cookieName);}},{key:\"getCookie\",value:function getCookie(cookieName){var cookie={};document.cookie.split(';').forEach(function(el){var _el$split3=el.split('='),_el$split4=_slicedToArray(_el$split3,2),key=_el$split4[0],value=_el$split4[1];cookie[key.trim()]=value;});return cookie[cookieName];}},{key:\"getShoppingCart\",value:function getShoppingCart(){if(!this.hasCookie(\"shoppingCart\")){document.cookie=\"shoppingCart=;SameSite=Lax;domain=localhost;path=/\";}var item_str_array=this.getCookie(\"shoppingCart\").split(\",\");var item_id_array=[];for(var i=0;i<item_str_array.length;i++){if(item_str_array[i]!=\"\"){var item_id=parseInt(item_str_array[i]);item_id_array.push(item_id);}}return item_id_array;}},{key:\"addToCart\",value:function addToCart(id){if(!this.hasCookie(\"shoppingCart\")){document.cookie=\"shoppingCart=;SameSite=Lax;domain=localhost;path=/\";}var item_id_array=this.getShoppingCart();if(!item_id_array.includes(id)){item_id_array.push(id);}document.cookie=\"shoppingCart=\"+item_id_array.join(\",\")+\";SameSite=Lax;domain=localhost;path=/\";this.forceUpdate();}},{key:\"render\",value:function render(){var _this2=this;var api_url=\"http://localhost:8080/api\";var api_url_items=api_url+\"/items\";this.state.n_items=1;var addToCart=function addToCart(id){if(_this2.state.cart.indexOf(id)==-1){_this2.state.cart.push(id);_this2.count+=1;_this2.forceUpdate();}};var removeFromCart=function removeFromCart(id){_this2.state.cart.remove(id);};return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TopBar,{itemCount:this.getShoppingCart().length}),/*#__PURE__*/_jsx(\"div\",{class:\"main-cont\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/shop/*\",element:/*#__PURE__*/_jsx(Home,{search:api_url_items,addToCart:this.addToCart})}),/*#__PURE__*/_jsx(Route,{path:\"/search/*\",element:/*#__PURE__*/_jsx(Search,{search:api_url_items,addToCart:this.addToCart})}),/*#__PURE__*/_jsx(Route,{path:\"/cart/*\",element:/*#__PURE__*/_jsx(Cart,{search:api_url_items,cart:this.getShoppingCart(),addToCart:this.removeFromCart})})]})})]})});}}]);return App;}(React.Component);","map":{"version":3,"sources":["G:/skola/webtech/mysite/my-react-app/src/App.js"],"names":["React","useState","ItemViewer","Home","Search","Account","TopBar","Cart","Cookies","BrowserRouter","Routes","Route","Link","App","props","state","cart","n_items","count","addToCart","bind","getCookie","hasCookie","cookieName","cookies","document","cookie","split","forEach","el","key","value","push","includes","trim","item_str_array","item_id_array","i","length","item_id","parseInt","id","getShoppingCart","join","forceUpdate","api_url","api_url_items","indexOf","removeFromCart","remove","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {useState} from 'react' \nimport './App.css';\nimport {ItemViewer} from './ItemViewer'\nimport {Home} from './Home'\nimport {Search} from './Search'\nimport {Account} from './Account'\nimport {TopBar} from './TopBar'\nimport {Cart} from './Cart'\nimport Cookies from 'js-cookie'\n\n\nimport {BrowserRouter,\n\t\tRoutes,\n\t\tRoute,\n\t\tLink\n\t\t} from \"react-router-dom\";\n\nexport class App extends React.Component {\n\t\n\tconstructor(props){\n\t\tsuper(props);\n\t\t\n\t\tthis.state = {cart:[],\n\t\t\t\t\t\tn_items:0};\n\t\t\n\t\tthis.count = 0;\n\t\t\n\t\tthis.addToCart=this.addToCart.bind(this);\n\t\tthis.getCookie=this.getCookie.bind(this);\n\t\tthis.hasCookie=this.hasCookie.bind(this);\n\n\t\t\n\t\t\n\t\t\n\t}\n\t\n\t\n\thasCookie(cookieName){\n\t\tlet cookies = [];\n\t\tdocument.cookie.split(';').forEach(function(el) {\n\t\t\tlet [key,value] = el.split('=');\n\t\t\tcookies.push(key);\n\t\t})\n\t\t\n\t\treturn (cookies.includes(cookieName));\n\t}\n\t\n\t\n\tgetCookie(cookieName) {\n\t\tlet cookie = {};\n\t\tdocument.cookie.split(';').forEach(function(el) {\n\t\t\tlet [key,value] = el.split('=');\n\t\t\tcookie[key.trim()] = value;\n\t\t})\n\t\treturn cookie[cookieName];\n\t}\n\t\n\t\n\t\n\t\n\tgetShoppingCart(){\n\t\tif(!this.hasCookie(\"shoppingCart\")){\n\t\t\tdocument.cookie = \"shoppingCart=;SameSite=Lax;domain=localhost;path=/\";\n\t\t\t\n\t\t}\n\n\t\tlet item_str_array = this.getCookie(\"shoppingCart\").split(\",\")\n\t\tlet item_id_array = []\n\t\t\n\t\tfor(let i = 0; i < item_str_array.length; i++){\n\t\t\tif (item_str_array[i] != \"\"){\n\t\t\t\tlet item_id = parseInt(item_str_array[i])\n\t\t\t\titem_id_array.push(item_id)\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn item_id_array\n\t\t\n\t}\n\t\n\t\n\taddToCart(id) {\n\t\tif(!this.hasCookie(\"shoppingCart\")){\n\t\t\tdocument.cookie = \"shoppingCart=;SameSite=Lax;domain=localhost;path=/\";\n\t\t}\n\t\t\n\t\tlet item_id_array = this.getShoppingCart();\n\t\t\n\t\tif (!item_id_array.includes(id)) { \n\t\t\titem_id_array.push(id)\n\t\t}\n\t\tdocument.cookie = \"shoppingCart=\" + item_id_array.join(\",\") + \";SameSite=Lax;domain=localhost;path=/\";\n\t\t\n\t\tthis.forceUpdate()\n\t\t\n\t}\n\t\n\n\t\n\t\n\t\t\n\t\n\trender(){\n\t\t\n\t\tconst api_url = \"http://localhost:8080/api\";\n\t\tconst api_url_items = api_url + \"/items\";\n\t\t\n\t\tthis.state.n_items = 1;\n\t\t\n\t\tconst addToCart = (id) => {\n\t\t\t\n\t\t\tif (this.state.cart.indexOf(id) == -1 ) { \n\t\t\t\tthis.state.cart.push(id)\n\t\t\t\tthis.count += 1;\n\t\t\t\tthis.forceUpdate()\n\t\t\t}\n\t\t\t\n\t\t}\n\t\tconst removeFromCart = (id) =>{\n\t\t\tthis.state.cart.remove(id)\n\t\t}\n\t\t\t\n\t\t\n\t\treturn (\n\t\t\n\t\t\t\n\t\t\t<BrowserRouter>\n\t\t\t\t<div>\n\t\t\t\t\t\n\t\t\t\t\t<TopBar itemCount={this.getShoppingCart().length}/>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div class='main-cont'>\n\t\t\t\t\t\t<Routes>\n\t\t\t\t\t\t\t<Route path=\"/shop/*\" element={<Home search={api_url_items} addToCart={this.addToCart}/>} />\n\t\t\t\t\t\t\t<Route path=\"/search/*\" element={<Search search={api_url_items} addToCart={this.addToCart}/>} />\n\t\t\t\t\t\t\t<Route path=\"/cart/*\" element={<Cart search={api_url_items} cart={this.getShoppingCart()}addToCart={this.removeFromCart}/>} />\n\t\t\t\t\t\t</Routes>\n\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t</BrowserRouter>\n\t\t);\n\t}\n}\n\n\n"]},"metadata":{},"sourceType":"module"}